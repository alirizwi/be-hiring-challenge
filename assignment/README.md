# Datapane Backend Assignment


## Getting Started

These instructions will get you a copy of the project up and running on your local machine for development and testing purposes.

### Prerequisites

```
* python3
* virtualenv
```
### Dependencies
```
* Django
* Django Rest Framework
* pandas
* matplotlib
* openpyxl
```

### Running the code

* Start the virtual environment and install the dependencies by executing:
```
virtualenv -p python3 venv
pip install -r requirements.txt
source venv/bin/activate
```

* Start the API server by executing:
```
python server/manage.py runserver
```

* Execute the client's command-line python application by:
```
python3 client/client.py
```

### Client Application Commands:

To execute a command in the client's command line interface, execute:

`<command> <arguments separated by space>`

Example: 
`create_dataset ../sample_data_2.csv sample_data_2.csv`

#### List of the commands:

Commands | API Endpoint | Arguments | Return Value | Operation
--- | --- | --- | --- | --- 
get_all_datasets | `GET /datasets/` | None | List of json objects describing the uploaded datasets | list the uploaded datasets
create_dataset |  `POST /datasets/` | csv_file_path, file_description | Json object of the uploaded dataset | uploads the CSV file and creates the dataset.
get_dataset | `GET /datasets/<id>/` | file_id | Json object having file name and size of the dataset object | Get information about a particular dataset
delete_dataset | `DELETE /datasets/<id>/` | file_id | Json object having response message and path of the deleted file | delete the dataset object
export_excelfile | `GET /datasets/<id>/excel/` | file_id | Json object having path of the created excel file |export the dataset as an excel file
get_dataset_stats | `GET /datasets/<id>/stats/` | file_id | Json object containing the stats of the dataset |return the the stats generated by running df.describe() on the pandas dataframe as a json object
get_dataset_plots | `GET /datasets/<id>/plot/` | file_id | Json object having path of the created pdf file | generate and return a PDF containing a list of histograms of all the numerical columns in the dataset
exit | N/A | None | Exits the program

## Implementation Details

* The assignment is written completely in Python.
* The backend API server is implemented using Django and Django Rest Framework.
* The module `file_app` conatins all the code related to the API's.
* To store the information regarding the uploaded datasets, `File` class is created which contain file(Type: FileField, Path where the file is stored), description and timestamp as attibutes. Whenever a csv file is uploaded, the csv file is stored in the `/media` directory and object of type `File` is stored in the SQLlite3 database.
* To get the list of uploaded datasets or get a particular dataset, the database is queried and the output is returned as a json object.
* To delete a dataset, the row of the dataset is deleted from the database and the corressponding csv file present in the `/media` directory is also deleted.
* To perform operations on the csv files, they are converted to pandas dataframes. These dataframes are used to export the dataset as an excel file, return the stats of the dataset and return the list of histograms of all the numerical columns in the dataset.

## Authors

* **Syed Mohd Ali Rizwi** - [alirizwi](https://github.com/alirizwi)
